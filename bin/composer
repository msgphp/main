#!/usr/bin/env bash

RETURN=0

for DIR in $(find src/ -maxdepth 1 -mindepth 1 -type d) ; do
    pushd $DIR &> /dev/null
    echo -e "\e[34mRunning Composer in ${DIR}\e[0m"
    composer "${@}"
    LAST=$? ; [[ ${LAST} -ne 0 ]] && RETURN=${LAST}
    popd &> /dev/null
done

exit ${RETURN}
